
/* 
this is a fix from microsoft site for the delay of teh combo update panel issue bug 17770 
it's need to be just before the close tag of body on teh master page
*/

function disposeTree(sender, args) 
{
    var elements = args.get_panelsUpdating();
    
    for (var i = elements.length - 1; i >= 0; i--) 
    {
        var element = elements[i];
        var allnodes = element.getElementsByTagName('*'),
                  length = allnodes.length;
        var nodes = new Array(length)
        for (var k = 0; k < length; k++) {
            nodes[k] = allnodes[k];
        }
        for (var j = 0, l = nodes.length; j < l; j++) {
            var node = nodes[j];
            if (node.nodeType === 1) {
                if (node.dispose && typeof (node.dispose) === "function") {
                    node.dispose();
                }
                else if (node.control && typeof (node.control.dispose) === "function") {
                    node.control.dispose();
                }
                var behaviors = node._behaviors;
                if (behaviors) {
                    behaviors = Array.apply(null, behaviors);
                    for (var k = behaviors.length - 1; k >= 0; k--) {
                        behaviors[k].dispose();
                    }
                }
            }
        }
        element.innerHTML = "";
    }
}

if (Sys.WebForms != null) 
{
    Sys.WebForms.PageRequestManager.getInstance().add_pageLoading(disposeTree);
}

